{% extends "pastebin.html.j2" %}

{% block meta %}
<meta name="description" content="{{ paste.get_title() }}">
<meta name="paste_id" content="{{ paste.paste_id }}">
{% endblock %}

{% block title %}{{ paste.get_title() }}{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col">
        <div class="d-flex align-items-center">
            <span>
                {% for tag in paste.get_tags() %}
                <em><a class="text-decoration-none" href="/pastebin/search/?tags={{ tag }}">{{ tag }}</a></em>
                {% endfor %}
            </span>
            <span class="d-none d-md-block text-muted ms-auto">
                <small class="me-2">VIEWS - {{ views }}</small>

                <button class="d-none btn btn-outline-secondary btn-sm c-paste-btn" id="share-btn" title="Share">
                    <img src="//{{ static_domain }}/static/img/share.svg" height="16" width="16" alt="Share" loading="lazy" />
                </button>

                <a href="{{ s3_bucket_url }}{{ paste.s3_key }}" class="btn btn-outline-secondary btn-sm c-paste-btn" id="download-btn" title="Download" download>
                    <img src="//{{ static_domain }}/static/img/download.svg" height="16" width="16" alt="Download" loading="lazy" />
                </a>

                {% if owned %}
                <a href="#" class="btn btn-outline-secondary btn-sm c-paste-btn" id="delete-btn" title="Delete">
                    <img src="//{{ static_domain }}/static/img/trash.svg" height="16" width="16" alt="Delete" loading="lazy" />
                </a>
                {% endif %}

            </span>
        </div>
    </div>
</div>
<div class="row">
    <div class="col">
        <h1 class="visually-hidden">{{ paste.get_title() }}</h1>
        <article id="content" role="main">
            <noscript>
                <p>Oop, you need Javascript to view this content. Alternatively, you can
                <a class="text-decorations-none" href="{{ s3_bucket_url }}{{ paste.s3_key }}">download this file</a>
                and open it on your own computer.
            </noscript>
            <iframe class="d-none" id="content-frame" src="about:blank" sandbox="allow-same-origin" title="content-html"></iframe>
            <pre class="d-none text-light" id="content-text" title="content-text"></pre>
        </article>
        <div class="d-none text-light" id="loader">
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Loading content, please wait ... <span id="loader-result"></span>
        </div>
    </div>
</div>
{% endblock %}

{% block moretail %}
<input type="hidden" id="paste-id" value="{{ paste.paste_id }}">
<input type="hidden" id="format" value="{{ paste.get_format() }}">
<input type="hidden" id="content-url" value="{{ s3_bucket_url }}{{ paste.s3_key }}">
<script async src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_key }}&onload=helloAgainCaptcha"></script>
<script src="//{{ static_domain }}/static/js/paste.js"></script>
{% endblock %}
